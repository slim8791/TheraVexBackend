@using TheravexBackend.Models
@model FactureViewModel

<div class="invoice-container" style="font-family: sans-serif; padding: 20px; color: #333;">
    <div style="display: flex; justify-content: space-between; border-bottom: 2px solid #000; padding-bottom: 10px;">
        <div>
            <h2 style="margin: 0;">LE TRIO MEDICAL</h2> <p style="margin: 2px 0;">VENTE MATERIEL PARAMEDICAL ET PARAPHARMACIE</p> <small>
                Route Gremda KM2 en face complexe Syphax Médical <br /> Tél: 31 501 509 / 25 728 418
            </small>
        </div>
        <div style="text-align: right;">
            <img src="@(Url.Content("~/Images/logo.png"))" alt="Theravex logo" style="height:64px; width:auto; display:block; margin:0 0 8px 0;" />
            <p><strong>MF:</strong> 1557405/R/B/M/000</p> <p><strong>RC:</strong> B0891182018</p>
        </div>
    </div>

    <div style="margin-top: 20px; display: flex; justify-content: space-between;">
        <div>
            <h3 style="margin: 0;">FACTURE N° : @Model.Numero</h3> <p>Date : @Model.Date.ToString("dd/MM/yyyy")</p>
        </div>
        <div style="border: 1px solid #ccc; padding: 10px; min-width: 250px;">
            <strong>Client :</strong> @Model.ClientNom <br /> <strong>Adresse :</strong> @Model.ClientAdresse <br />
            <strong>MF :</strong> @Model.ClientMF
        </div>
    </div>

    <table style="width: 100%; border-collapse: collapse; margin-top: 30px;">
        <thead>
            <tr style="background-color: #f2f2f2; border-bottom: 1px solid #000;">
                <th style="text-align: left; padding: 8px;">Référence</th>
                <th style="text-align: left; padding: 8px;">Désignation</th>
                <th style="text-align: center; padding: 8px;">Qté</th>
                <th style="text-align: right; padding: 8px;">PU HT</th>
                <th style="text-align: center; padding: 8px;">TVA</th>
                <th style="text-align: right; padding: 8px;">Total TTC</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var ligne in Model.Lignes)
            {
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 8px;">@ligne.Reference</td>
                    <td style="padding: 8px;">@ligne.Designation</td>
                    <td style="text-align: center; padding: 8px;">@ligne.Qte</td>
                    <td style="text-align: right; padding: 8px;">@ligne.PUHT.ToString("N3")</td>
                    <td style="text-align: center; padding: 8px;">@ligne.TVA%</td>
                    <td style="text-align: right; padding: 8px;">@ligne.TotalTTC.ToString("N3")</td>
                </tr>
            }
        </tbody>
    </table>

    <div style="margin-top: 20px; display: flex; justify-content: flex-end;">
        <table style="width: 30%; border-collapse: collapse;">
            <tr>
                <td style="padding: 5px;"><strong>Total HT:</strong></td>
                <td style="text-align: right; padding: 5px;">@Model.TotalHT.ToString("N3")</td>
            </tr>
            <tr>
                <td style="padding: 5px;"><strong>Total TVA:</strong></td>
                <td style="text-align: right; padding: 5px;">@Model.TotalTVA.ToString("N3")</td>
            </tr>
            <tr>
                <td style="padding: 5px;"><strong>Droit de Timbre:</strong></td>
                <td style="text-align: right; padding: 5px;">@Model.Timbre.ToString("N3")</td>
            </tr>
            <tr style="background-color: #f2f2f2; font-weight: bold;">
                <td style="padding: 5px;">NET À PAYER:</td>
                <td style="text-align: right; padding: 5px;">@Model.NetAPayer.ToString("N3") DT</td>
            </tr>
        </table>
    </div>

    <div style="margin-top: 30px; font-style: italic;">
        Arrêté la présente facture à la somme de : <br />
        <strong>@Model.MontantEnLettres</strong>
    </div>

    <div style="margin-top: 50px; text-align: right; padding-right: 50px;">
        <p>Cachet et signature</p>
    </div>
</div>